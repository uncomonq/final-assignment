# Веб-сервис калькулятора

Этот проект представляет собой веб-сервис на Go, который оценивает математические выражения, отправленные через HTTP. Пользователи могут отправлять выражения на сервер, и он вернёт рассчитанный результат или сообщение об ошибке, если входные данные недействительны.

## Особенности
- Вычисление арифметических выражений с операторами `+`, `-`, `*`, `/`.
- Обработка круглых скобок в выражениях.
- Проверка выражений на корректность.
- Возврат соответствующих HTTP-статусов и сообщений об ошибках.

## Предварительные требования
- Установленная версия Go 1.18 или выше.

## Структура проекта
- `calc.go`: Содержит основную логику для проверки и вычисления математических выражений.
- `main.go`: Реализация веб-сервера и обработка запросов.

## Запуск проекта
1. Клонируйте или скачайте репозиторий.
2. Поместите файлы `calc.go` и `main.go` в одну директорию.
3. Перейдите в директорию проекта в терминале.
4. Выполните следующую команду, чтобы запустить сервер:
   ```bash
   go run main.go calc.go
   ```
5. Сервер запустится и будет слушать на порту `8080`.

## Использование
### Эндпоинт
- **URL:** `/api/v1/calculate`
- **Метод:** `POST`
- **Тело запроса:**
  ```json
  {
      "expression": "ваше математическое выражение"
  }
  ```

### Пример успешного запроса
#### Запрос:
```bash
curl -X POST -H "Content-Type: application/json" -d '{"expression": "2+2*2"}' http://localhost:8080/api/v1/calculate
```

#### Ответ:
```json
{
    "result": 6
}
```

### Примеры ошибок
#### Ошибка 422: Некорректное выражение
##### Запрос:
```bash
curl -X POST -H "Content-Type: application/json" -d '{"expression": "2++2"}' http://localhost:8080/api/v1/calculate
```
##### Ответ:
```json
{
    "error": "Expression is not valid"
}
```

#### Ошибка 500: Внутренняя ошибка сервера
- Эта ошибка редкая и указывает на проблему на стороне сервера.
- Пример: если функция `Calc` сталкивается с неожиданным состоянием (например, разыменование nil-указателя).
##### Запрос:
```bash
curl -X POST -H "Content-Type: application/json" -d '{"expression": null}' http://localhost:8080/api/v1/calculate
```
##### Ответ:
```json
{
    "error": "Internal server error"
}
```

## Тестирование
Вы можете протестировать API с помощью инструментов, таких как `curl`, Postman или написать автоматизированные тесты на Go.
